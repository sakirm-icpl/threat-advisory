# MANUAL COMMANDS TO FIX HTTP/2 PROTOCOL ERRORS
# 
# The issue: Flask development server can't handle HTTP/2 requests from browsers
# The fix: Switch to Gunicorn production server

# 1. Stop containers
docker-compose down

# 2. Remove backend image (to force rebuild with Gunicorn)
docker rmi versionintel-backend:latest

# 3. Build backend with Gunicorn
docker-compose build --no-cache backend

# 4. Start services
docker-compose up -d db
# Wait 15 seconds
docker-compose up -d backend
# Wait 20 seconds
docker-compose up -d frontend

# 5. Test - should see no more HTTP/2 errors
curl http://172.17.14.65:8000/health
curl http://172.17.14.65:8000/auth/github/login

# 6. Check logs - should be clean
docker logs versionintel_backend_1 --tail 10

# 7. Test OAuth in browser
# Go to: http://172.17.14.65:3000
# Click "Sign in with GitHub"